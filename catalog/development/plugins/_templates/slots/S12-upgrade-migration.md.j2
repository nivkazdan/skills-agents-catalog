---
name: {{ company }}-upgrade-migration
description: |
  Analyze, plan, and execute {{ display_name }} SDK upgrades with breaking change detection.
  Use when upgrading {{ display_name }} SDK versions, detecting deprecations,
  or migrating to new API versions.
  Trigger with phrases like "upgrade {{ company }}", "{{ company }} migration",
  "{{ company }} breaking changes", "update {{ company }} SDK", "analyze {{ company }} version".
allowed-tools: Read, Write, Edit, Bash(npm:*), Bash(git:*)
version: 1.0.0
license: MIT
author: Jeremy Longshore <jeremy@intentsolutions.io>
---

# {{ display_name }} Upgrade & Migration

## Overview
Guide for upgrading {{ display_name }} SDK versions and handling breaking changes.

## Prerequisites
- Current {{ display_name }} SDK installed
- Git for version control
- Test suite available
- Staging environment

## Instructions

### Step 1: Check Current Version
```bash
npm list {{ npm_package | default(company + '-sdk') }}
npm view {{ npm_package | default(company + '-sdk') }} version
```

### Step 2: Review Changelog
```bash
open {{ changelog_url | default('https://github.com/' + company + '/sdk/releases') }}
```

### Step 3: Create Upgrade Branch
```bash
git checkout -b upgrade/{{ company }}-sdk-vX.Y.Z
npm install {{ npm_package | default(company + '-sdk') }}@latest
npm test
```

### Step 4: Handle Breaking Changes
Update import statements, configuration, and method signatures as needed.

## Output
- Updated SDK version
- Fixed breaking changes
- Passing test suite
- Documented rollback procedure

## Error Handling
| SDK Version | API Version | Node.js | Breaking Changes |
|-------------|-------------|---------|------------------|
| {{ v3_sdk | default('3.x') }} | {{ v3_api | default('2024-01') }} | {{ v3_node | default('18+') }} | {{ v3_breaking | default('Major refactor') }} |
| {{ v2_sdk | default('2.x') }} | {{ v2_api | default('2023-06') }} | {{ v2_node | default('16+') }} | {{ v2_breaking | default('Auth changes') }} |
| {{ v1_sdk | default('1.x') }} | {{ v1_api | default('2022-01') }} | {{ v1_node | default('14+') }} | {{ v1_breaking | default('Initial release') }} |

## Examples

### Import Changes
```typescript
// Before (v1.x)
import { Client } from '{{ npm_package | default(company + '-sdk') }}';

// After (v2.x)
import { {{ client_class | default(display_name + 'Client') }} } from '{{ npm_package | default(company + '-sdk') }}';
```

### Configuration Changes
```typescript
// Before (v1.x)
const client = new Client({ key: 'xxx' });

// After (v2.x)
const client = new {{ client_class | default(display_name + 'Client') }}({
  apiKey: 'xxx',
});
```

### Rollback Procedure
```bash
npm install {{ npm_package | default(company + '-sdk') }}@1.x.x --save-exact
```

### Deprecation Handling
```typescript
// Monitor for deprecation warnings in development
if (process.env.NODE_ENV === 'development') {
  process.on('warning', (warning) => {
    if (warning.name === 'DeprecationWarning') {
      console.warn('[{{ display_name }}]', warning.message);
      // Log to tracking system for proactive updates
    }
  });
}

// Common deprecation patterns to watch for:
// - Renamed methods: client.oldMethod() -> client.newMethod()
// - Changed parameters: { key: 'x' } -> { apiKey: 'x' }
// - Removed features: Check release notes before upgrading
```

## Resources
- [{{ display_name }} Changelog]({{ changelog_url | default('https://github.com/' + company + '/sdk/releases') }})
- [{{ display_name }} Migration Guide]({{ docs_url | default('https://docs.' + company + '.com') }}/migration)

## Next Steps
For CI integration during upgrades, see `{{ company }}-ci-integration`.
